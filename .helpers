### common use helper functions

# checks if the given command exists
_command_exists() { command -v "$1" >/dev/null 2>&1; }

# checks if the given variable is set
_variable_set() { [ -n "$1" ]; }

# checks if $2 begins with $1
_begins_with() { case "$2" in "$1"*) true;; *) false;; esac; }

# checks if $2 ends with $1
_ends_with() { case "$2" in *"$1") true;; *) false;; esac; }

# checks if we are running bash
_is_bash() { _variable_set "${BASH_VERSION}"; }

# checks if we are running zsh
_is_zsh() { _variable_set "${ZSH_VERSION}"; }

# checks if we are in a git repo
_is_git_repo() { git rev-parse --is-inside-work-tree &>/dev/null; }

# checks if we are running in wsl
_is_wsl() { [ grep -qEi "(microsoft|WSL)" /proc/version &> /dev/null ]; }

# checks if we are running on macOS
_is_macos() { [ $(uname -s) = "Darwin" ]; }

# trims given text
_trim() {
	local var="$@"
	var="${var#"${var%%[![:space:]]*}"}"  # remove leading whitespace characters
	var="${var%"${var##*[![:space:]]}"}"  # remove trailing whitespace characters
	echo "${var}"
}

# checks if $1 is in an array $2, must be passed as "${array[@]}"
# does not work with spaces in elements as that requires looping
_in_list() {
    local str="${1}"; shift
    [[ " $@ " =~ " ${str} " ]]
}

# adds a folder to front of PATH
# if it is already in PATH, remove it first
_add_to_path() {
    if [ -d "$1" ]; then
        case ":${PATH:=$1}:" in
            *:"$1":*) _remove_from_path "$1" ;;
            *) ;;
        esac
        PATH="$1:${PATH}" 
    fi
}

# removes a dir from PATH
_remove_from_path() {
   local p d
   p=":$1:"
   d=":$PATH:"
   d="${d//$p/:}"
   d="${d/#:/}"
   PATH="${d/%:/}"
}
