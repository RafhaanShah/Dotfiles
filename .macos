### macOS specifics

# brew, package manager for macOS
# https://brew.sh/
# /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
if _command_exists "brew"; then
    BREW_PREFIX="$(brew --prefix)"
    # gnu coreutils https://formulae.brew.sh/formula/coreutils
    _add_to_path "${BREW_PREFIX}/opt/coreutils/libexec/gnubin"
    unset BREW_PREFIX
fi

# non gnu ls options
if ! _command_exists "gls"; then  
    export CLICOLOR=1
    export LSCOLORS="ExGxbxbxCxfxfxCxCxExEx"
    alias ls='command ls -G'
fi
    
# opens file or folder in default app (the macOS command is open)
unalias open

# clipboard
alias copy='pbcopy'
alias paste='paste'

# get last wake / sleep events
alias sleeplog='pmset -g log|grep -e " Sleep  " -e " Wake  " | tail'

# get processes using webcam
alias camusage='lsof | grep "AppleCamera"'

# rm moves to trash instead
unalias rm
rm() {
    for FILE in "$@"; do
        local BASENAME=$(basename "${FILE}")
        while [ -e "${HOME}/.Trash/${BASENAME}" ]; do
            BASENAME="${BASENAME} $(date +%H.%M.%S %p)"
        done
        mv "${FILE}" "${HOME}/.Trash/${BASENAME}"
    done
    unset FILE
}
